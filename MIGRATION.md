# 移行計画 (PR1〜PR5)

このドキュメントは、Chrome 拡張「MerSearch Helper」を新しい構成へ安全に移行するためのステップをまとめたものです。各段階は段階的にユースケースを移行し、既存ユーザーへの影響を最小限に抑えることを目的としています。

| PR | 主なタスク | 完了条件 (DoD) | 高校生向け一文要約 |
| --- | --- | --- | --- |
| PR1 | 新しいディレクトリ構成の骨組みを追加し、ポート型定義、entrypoint 用ラッパ、テストの雛形だけを準備する。実際のユースケースや処理ロジックはまだ移行しない。 | - `npm run lint` / `npm run typecheck` / `npm run test` / `npm run e2e` / `npm run build` をすべて成功させる。<br>- manifest や公開 API 名を変更しない。<br>- 環境変数や設定ファイルを変更しない。 | 棚を組み立てるだけで、道具や教材はまだ移さない段階。 |
| PR2 | 最初のユースケースを新構成へ移行し、新しい骨組み上で正しく動くようにする。 | - `npm run lint` / `npm run typecheck` / `npm run test` / `npm run e2e` / `npm run build` をすべて成功させる。<br>- manifest や公開 API 名を変更しない。<br>- 環境変数や設定ファイルを変更しない。 | 新しい棚に最初の教科書セットだけ移して、使い勝手を確認する。 |
| PR3 | 二つ目のユースケースを移行し、共通部分があればリファクタリングする。 | - `npm run lint` / `npm run typecheck` / `npm run test` / `npm run e2e` / `npm run build` をすべて成功させる。<br>- manifest や公開 API 名を変更しない。<br>- 環境変数や設定ファイルを変更しない。 | 棚の別の段に二つ目の教材を移し、整理整頓を進める。 |
| PR4 | 三つ目のユースケースを移行し、旧構成との整合性チェックを行う。 | - `npm run lint` / `npm run typecheck` / `npm run test` / `npm run e2e` / `npm run build` をすべて成功させる。<br>- manifest や公開 API 名を変更しない。<br>- 環境変数や設定ファイルを変更しない。 | 棚の残りスペースに三つ目の教材を移し、元の教室と同じように使えるか確かめる。 |
| PR5 | 残ったユースケースをすべて移行し、不要になった旧構成を片付ける。必要なら最終的なドキュメント更新も行う。 | - `npm run lint` / `npm run typecheck` / `npm run test` / `npm run e2e` / `npm run build` をすべて成功させる。<br>- manifest や公開 API 名を変更しない。<br>- 環境変数や設定ファイルを変更しない。 | 棚にすべての教材を移し終えて、使わなくなった箱を片付ける仕上げの段階。 |

各ステップでは、既存ユーザーが利用する公開 API や manifest 情報を変えず、環境変数や設定ファイルにも手を入れません。常に lint・型チェック・テスト・E2E・ビルドの全てを通過させることで、品質と互換性を確保します。初心者の方でも迷わず進められるよう、一度に移行するユースケースは 1 つに絞り、段階ごとのゴールを明確にしています。
